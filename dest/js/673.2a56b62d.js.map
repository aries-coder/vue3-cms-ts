{"version":3,"file":"js/673.2a56b62d.js","mappings":"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","sources":["webpack://vue3-cms-ts/./src/views/main/system/user/config/search.config.ts","webpack://vue3-cms-ts/./src/views/main/system/user/config/content.config.ts","webpack://vue3-cms-ts/./src/views/main/system/user/config/modal.config.ts","webpack://vue3-cms-ts/./node_modules/vue-loader/dist/index.js","webpack://vue3-cms-ts/./src/views/main/system/user/user.vue"],"sourcesContent":["import { IForm } from '@/base-ui/form'\n\nexport const searchFormConfig: IForm = {\n  labelWidth: '100px',\n  formItems: [\n    {\n      field: 'id',\n      label: 'id',\n      placeholder: '请输入id',\n      type: 'input',\n      itemType: 'text'\n    },\n    {\n      field: 'name',\n      label: '用户名',\n      placeholder: '请输入用户名',\n      itemType: 'text',\n      type: 'input'\n    },\n    {\n      field: 'realname',\n      label: '真实姓名',\n      placeholder: '请输入真实姓名',\n      itemType: 'text',\n      type: 'input'\n    },\n    {\n      field: 'cellphone',\n      label: '电话号码',\n      placeholder: '请输入电话号码',\n      itemType: 'text',\n      type: 'input'\n    },\n    {\n      field: 'enable',\n      label: '用户状态',\n      placeholder: '请选择用户状态',\n      itemType: 'group',\n      type: 'select',\n      options: [\n        {\n          label: '启用',\n          value: 1\n        },\n        {\n          label: '禁用',\n          value: 0\n        }\n      ]\n    },\n    {\n      field: 'createAt',\n      label: '创建时间',\n      itemType: 'daterange',\n      type: 'datePicker'\n    }\n  ]\n}\n","import { NTag, NButton, NIcon } from 'naive-ui'\nimport { Edit, Delete } from '@vicons/carbon'\nimport { h } from 'vue'\nimport { ITheadItem } from '@/base-ui/table'\nimport { formatUtcString } from '@/utils/date-format'\n\nconst icons = [Edit, Delete]\nexport const thead: ITheadItem[] = [\n  {\n    type: 'selection',\n    align: 'center'\n  },\n  {\n    title: '序号',\n    key: 'sort',\n    align: 'center'\n  },\n  {\n    title: '用户名',\n    align: 'center',\n    key: 'name'\n  },\n  {\n    title: '真实姓名',\n    align: 'center',\n    key: 'realname'\n  },\n  {\n    title: '手机号码',\n    align: 'center',\n    key: 'cellphone'\n  },\n  {\n    title: '状态',\n    align: 'center',\n    key: 'enable',\n    render: (row: any) => {\n      const tags = row.enable.map((item: any) => {\n        return h(\n          NTag,\n          {\n            type: 'info'\n          },\n          {\n            default: () => (item === 1 ? '启用' : '禁用')\n          }\n        )\n      })\n\n      return tags\n    }\n  },\n  {\n    title: '创建时间',\n    align: 'center',\n    key: 'createAt'\n  },\n  {\n    title: '更新时间',\n    align: 'center',\n    key: 'updateAt'\n  },\n  {\n    title: '操作',\n    align: 'center',\n    key: 'action',\n    render: (row: any) => {\n      const btns = row.action.map((item: any, index: number) => {\n        if (item.verify) {\n          return h(\n            NButton,\n            {\n              type: item.type,\n              onClick: () => {\n                switch (item.text) {\n                  case '删除':\n                    item.event({\n                      id: row.id,\n                      queryInfo: { offset: 0, size: 10 }\n                    })\n                    break\n                  case '编辑':\n                    item.event(row)\n                }\n              }\n            },\n            [h(NIcon, null, { default: () => h(icons[index]) }), item.text]\n          )\n        }\n      })\n\n      return btns\n    }\n  }\n]\n\ninterface ITbodyData {\n  key: number\n  id: number\n  sort: number\n  name: string\n  realname: string\n  cellphone: number\n  enable: number[]\n  createAt: string\n  updateAt: string\n  departmentId: number\n  roleId: number\n  action: object[]\n}\n\nexport function initTbodyData(\n  dataList: any,\n  btnVerify: any[],\n  btnEvents: any[]\n) {\n  const totalList: ITbodyData[] = []\n  dataList.value.forEach((item: any, index: number) => {\n    totalList.push({\n      key: item.id,\n      id: item.id,\n      sort: index + 1,\n      name: item.name,\n      realname: item.realname,\n      cellphone: item.cellphone,\n      enable: [item.enable],\n      createAt: formatUtcString(item.createAt),\n      updateAt: formatUtcString(item.updateAt),\n      departmentId: item.departmentId,\n      roleId: item.roleId,\n      action: [\n        {\n          text: '编辑',\n          type: 'primary',\n          verify: btnVerify[0],\n          event: btnEvents[0]\n        },\n        {\n          text: '删除',\n          type: 'error',\n          verify: btnVerify[1],\n          event: btnEvents[1]\n        }\n      ]\n    })\n  })\n  return totalList\n}\n","import { IForm } from '@/base-ui/form'\n\nexport function initModalFormConfigFn(type: string = 'new') {\n  if (type === 'new') {\n    const modalFormConfig: IForm = {\n      labelWidth: '100px',\n      formItems: [\n        {\n          field: 'name',\n          label: '用户名',\n          placeholder: '请输入用户名',\n          type: 'input',\n          itemType: 'text'\n        },\n        {\n          field: 'realname',\n          label: '真实姓名',\n          placeholder: '请输入真实姓名',\n          itemType: 'text',\n          type: 'input'\n        },\n        {\n          field: 'password',\n          label: '用户密码',\n          placeholder: '请输入用户密码',\n          itemType: 'password',\n          type: 'input'\n        },\n        {\n          field: 'cellphone',\n          label: '电话号码',\n          placeholder: '请输入电话号码',\n          itemType: 'text',\n          type: 'input'\n        },\n        {\n          field: 'departmentId',\n          label: '选择部门',\n          placeholder: '请选择部门',\n          itemType: 'group',\n          type: 'select',\n          options: []\n        },\n        {\n          field: 'roleId',\n          label: '选择角色',\n          placeholder: '请选择角色',\n          itemType: 'group',\n          type: 'select',\n          options: []\n        }\n      ]\n    }\n    return modalFormConfig\n  } else if (type === 'edit') {\n    const modalFormConfig: IForm = {\n      labelWidth: '100px',\n      formItems: [\n        {\n          field: 'name',\n          label: '用户名',\n          placeholder: '请输入用户名',\n          type: 'input',\n          itemType: 'text'\n        },\n        {\n          field: 'realname',\n          label: '真实姓名',\n          placeholder: '请输入真实姓名',\n          itemType: 'text',\n          type: 'input'\n        },\n        {\n          field: 'cellphone',\n          label: '电话号码',\n          placeholder: '请输入电话号码',\n          itemType: 'text',\n          type: 'input'\n        },\n        {\n          field: 'departmentId',\n          label: '选择部门',\n          placeholder: '请选择部门',\n          itemType: 'group',\n          type: 'select',\n          options: []\n        },\n        {\n          field: 'roleId',\n          label: '选择角色',\n          placeholder: '请选择角色',\n          itemType: 'group',\n          type: 'select',\n          options: []\n        }\n      ]\n    }\n    return modalFormConfig\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-942039b8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"user\" }\n\nimport PageSearch from '@/components/page-search'\nimport PageContent from '@/components/page-content'\nimport PageModal from '@/components/page-modal'\n\nimport { searchFormConfig } from './config/search.config'\nimport { thead, initTbodyData } from './config/content.config'\nimport { initModalFormConfigFn } from './config/modal.config'\n\nimport { usePageSearch } from '@/hooks/use-page-search'\nimport { usePageModal } from '@/hooks/use-page-modal'\nimport { useStore } from '@/store'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  name: 'user',\n  setup(__props) {\n\nconst store = useStore()\n\n// page-search 相关的 hook\nconst [pageContentRef, handleQueryBtnClick, handleResetBtnClick] =\n  usePageSearch()\n\n// page-modal 相关的hook\nconst [\n  title,\n  modalEventName,\n  showPageModal,\n  modalFormConfig,\n  modalDefaultInfo,\n  handleEditData,\n  handleNewData\n] = usePageModal(\n  ['新建用户', '编辑用户'],\n  initModalFormConfigFn,\n  initmodalFormConfigSelectItem\n)\n\n// 动态添加部门和角色列表\nfunction initmodalFormConfigSelectItem() {\n  modalFormConfig.value.formItems.forEach((item: any) => {\n    switch (item.field) {\n      case 'departmentId':\n        item.options = store.state.entireDepartment.map((item: any) => {\n          return { label: item.name, value: item.id }\n        })\n        break\n      case 'roleId':\n        item.options = store.state.entireRole.map((item: any) => {\n          return { label: item.name, value: item.id }\n        })\n        break\n    }\n  })\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_n_dialog_provider = _resolveComponent(\"n-dialog-provider\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_unref(PageSearch), {\n      searchFormConfig: _unref(searchFormConfig),\n      onQueryBtnClick: _unref(handleQueryBtnClick),\n      onResetBtnClick: _unref(handleResetBtnClick)\n    }, null, 8, [\"searchFormConfig\", \"onQueryBtnClick\", \"onResetBtnClick\"]),\n    _createVNode(_unref(PageContent), {\n      thead: _unref(thead),\n      pageName: \"users\",\n      \"init-tbody-fn\": _unref(initTbodyData),\n      ref_key: \"pageContentRef\",\n      ref: pageContentRef,\n      onHandleNewData: _unref(handleNewData),\n      onHandleEditData: _unref(handleEditData)\n    }, null, 8, [\"thead\", \"init-tbody-fn\", \"onHandleNewData\", \"onHandleEditData\"]),\n    _createVNode(_component_n_dialog_provider, null, {\n      default: _withCtx(() => [\n        (_unref(showPageModal))\n          ? (_openBlock(), _createBlock(_unref(PageModal), {\n              key: 0,\n              modalFormConfig: _unref(modalFormConfig),\n              \"default-info\": _unref(modalDefaultInfo),\n              \"page-name\": \"users\",\n              \"event-name\": _unref(modalEventName),\n              title: _unref(title)\n            }, null, 8, [\"modalFormConfig\", \"default-info\", \"event-name\", \"title\"]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    })\n  ]))\n}\n}\n\n})","import script from \"./user.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./user.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./user.vue?vue&type=style&index=0&id=942039b8&scoped=true&lang=less\"\n\nimport exportComponent from \"E:\\\\tools\\\\vue3后台管理系统（ts）\\\\vue3-cms-ts\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-942039b8\"]])\n\nexport default __exports__"],"names":["searchFormConfig","labelWidth","formItems","field","label","placeholder","type","itemType","options","value","icons","Edit","Delete","thead","align","title","key","render","row","tags","enable","map","item","h","NTag","default","btns","action","index","verify","NButton","onClick","text","event","id","queryInfo","offset","size","NIcon","initTbodyData","dataList","btnVerify","btnEvents","totalList","forEach","push","sort","name","realname","cellphone","createAt","formatUtcString","updateAt","departmentId","roleId","initModalFormConfigFn","modalFormConfig","_hoisted_1","class","_defineComponent","setup","__props","store","useStore","pageContentRef","handleQueryBtnClick","handleResetBtnClick","usePageSearch","modalEventName","showPageModal","modalDefaultInfo","handleEditData","handleNewData","usePageModal","initmodalFormConfigSelectItem","state","entireDepartment","entireRole","_ctx","_cache","_component_n_dialog_provider","_resolveComponent","_openBlock","_createElementBlock","_createVNode","_unref","PageSearch","onQueryBtnClick","onResetBtnClick","PageContent","pageName","ref_key","ref","onHandleNewData","onHandleEditData","_withCtx","_createBlock","PageModal","_createCommentVNode","_","__exports__"],"sourceRoot":""}