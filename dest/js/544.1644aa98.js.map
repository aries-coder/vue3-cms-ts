{"version":3,"file":"js/544.1644aa98.js","mappings":"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","sources":["webpack://vue3-cms-ts/./src/views/main/system/role/config/search.config.ts","webpack://vue3-cms-ts/./src/views/main/system/role/config/content.config.ts","webpack://vue3-cms-ts/./src/views/main/system/role/config/modal.config.ts","webpack://vue3-cms-ts/./node_modules/vue-loader/dist/index.js","webpack://vue3-cms-ts/./src/views/main/system/role/role.vue"],"sourcesContent":["import { IForm } from '@/base-ui/form'\n\nexport const searchFormConfig: IForm = {\n  labelWidth: '100px',\n  formItems: [\n    {\n      field: 'name',\n      label: '角色名称',\n      type: 'input',\n      itemType: 'text'\n    },\n    {\n      field: 'intro',\n      label: '权限介绍',\n      type: 'input',\n      itemType: 'text'\n    },\n    {\n      field: 'createAt',\n      label: '创建时间',\n      type: 'datePicker',\n      itemType: 'daterange'\n    }\n  ]\n}\n","import { NButton, NIcon } from 'naive-ui'\nimport { Edit, Delete } from '@vicons/carbon'\nimport { h } from 'vue'\nimport { ITheadItem } from '@/base-ui/table'\nimport { formatUtcString } from '@/utils/date-format'\n\nconst icons = [Edit, Delete]\nexport const thead: ITheadItem[] = [\n  {\n    type: 'selection',\n    align: 'center'\n  },\n  {\n    title: '序号',\n    key: 'sort',\n    align: 'center'\n  },\n  {\n    title: '角色名',\n    align: 'center',\n    key: 'name'\n  },\n  {\n    title: '权限介绍',\n    align: 'center',\n    key: 'intro'\n  },\n  {\n    title: '创建时间',\n    align: 'center',\n    key: 'createAt'\n  },\n  {\n    title: '更新时间',\n    align: 'center',\n    key: 'updateAt'\n  },\n  {\n    title: '操作',\n    align: 'center',\n    key: 'action',\n    render: (row: any) => {\n      const btns = row.action.map((item: any, index: number) => {\n        if (item.verify) {\n          return h(\n            NButton,\n            {\n              type: item.type,\n              onClick: () => {\n                switch (item.text) {\n                  case '删除':\n                    item.event({\n                      id: row.id,\n                      queryInfo: { offset: 0, size: 10 }\n                    })\n                    break\n                  case '编辑':\n                    item.event(row)\n                }\n              }\n            },\n            [h(NIcon, null, { default: () => h(icons[index]) }), item.text]\n          )\n        }\n      })\n\n      return btns\n    }\n  }\n]\n\ninterface ITbodyData {\n  key: number\n  id: number\n  sort: number\n  name: string\n  intro: string\n  createAt: string\n  updateAt: string\n  action: object[]\n}\n\nexport function initTbodyData(\n  dataList: any,\n  btnVerify: any[],\n  btnEvents: any[]\n) {\n  console.log(dataList, 'mmmmmmmmmmmmmmm')\n\n  const totalList: ITbodyData[] = []\n  dataList.value.forEach((item: any, index: number) => {\n    totalList.push({\n      key: item.id,\n      id: item.id,\n      sort: index + 1,\n      name: item.name,\n      intro: item.intro,\n      createAt: formatUtcString(item.createAt),\n      updateAt: formatUtcString(item.updateAt),\n      action: [\n        {\n          text: '编辑',\n          type: 'primary',\n          verify: btnVerify[0],\n          event: btnEvents[0]\n        },\n        {\n          text: '删除',\n          type: 'error',\n          verify: btnVerify[1],\n          event: btnEvents[1]\n        }\n      ]\n    })\n  })\n  return totalList\n}\n","import { IForm } from '@/base-ui/form'\n\nexport function initModalFormConfigFn(type: string = 'new') {\n  if (type === 'new') {\n    const modalFormConfig: IForm = {\n      labelWidth: '100px',\n      formItems: [\n        {\n          field: 'name',\n          label: '角色名',\n          placeholder: '请输入用户名',\n          type: 'input',\n          itemType: 'text'\n        },\n        {\n          field: 'intro',\n          label: '角色介绍',\n          placeholder: '请输入真实姓名',\n          itemType: 'text',\n          type: 'input'\n        }\n      ]\n    }\n    return modalFormConfig\n  } else if (type === 'edit') {\n    const modalFormConfig: IForm = {\n      labelWidth: '100px',\n      formItems: [\n        {\n          field: 'name',\n          label: '角色名',\n          placeholder: '请输入用户名',\n          type: 'input',\n          itemType: 'text'\n        },\n        {\n          field: 'intro',\n          label: '角色介绍',\n          placeholder: '请输入真实姓名',\n          itemType: 'text',\n          type: 'input'\n        }\n      ]\n    }\n    return modalFormConfig\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"role\" }\n\nimport PageSearch from '@/components/page-search'\nimport PageContent from '@/components/page-content'\nimport PageModal from '@/components/page-modal'\n\nimport { searchFormConfig } from './config/search.config'\nimport { thead, initTbodyData } from './config/content.config'\nimport { initModalFormConfigFn } from './config/modal.config'\n\nimport { usePageSearch } from '@/hooks/use-page-search'\nimport { usePageModal } from '@/hooks/use-page-modal'\n\nimport { ref, watch, computed } from 'vue'\nimport { useStore } from '@/store'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  name: 'role',\n  setup(__props) {\n\nconst store = useStore()\n\n// page-search 相关的 hook\nconst [pageContentRef, handleQueryBtnClick, handleResetBtnClick] =\n  usePageSearch()\n\n// page-modal 相关的hook\nconst [\n  title,\n  modalEventName,\n  showPageModal,\n  modalFormConfig,\n  modalDefaultInfo,\n  handleEditData,\n  handleNewData\n] = usePageModal(['新建角色', '编辑角色'], initModalFormConfigFn)\n\nconst treeData = ref<any>([])\n\nconst menuList = computed(() => store.state.entireMenu)\n\nconst initTreeDataFn = (menuList: any) => {\n  const totalList: any = []\n  menuList.value.forEach((item: any) => {\n    const pList: any = { label: item.name, key: item.id }\n\n    function initTreeChildrenFn(childrenItem: any) {\n      const childrenList: any = []\n      childrenItem.forEach((item: any) => {\n        const list: any = { label: item.name, key: item.id }\n\n        if (item.children) {\n          list.children = initTreeChildrenFn(item.children)\n        }\n\n        childrenList.push(list)\n      })\n\n      return childrenList\n    }\n\n    if (item.children) {\n      pList.children = initTreeChildrenFn(item.children)\n    }\n\n    totalList.push(pList)\n  })\n  treeData.value = totalList\n}\n\nconst otherInfo = ref()\nconst changeTreeCheckedKeys = (data1: any, data2: any) => {\n  const menuList = Array.from(new Set(data2.map((item: any) => item.key)))\n  console.log(menuList)\n\n  otherInfo.value = { menuList }\n}\n\nwatch(\n  () => menuList,\n  (newValue) => {\n    initTreeDataFn(newValue)\n  },\n  { deep: true, immediate: true }\n)\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_n_tree = _resolveComponent(\"n-tree\")!\n  const _component_n_dialog_provider = _resolveComponent(\"n-dialog-provider\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_unref(PageSearch), {\n      searchFormConfig: _unref(searchFormConfig),\n      onQueryBtnClick: _unref(handleQueryBtnClick),\n      onResetBtnClick: _unref(handleResetBtnClick)\n    }, null, 8, [\"searchFormConfig\", \"onQueryBtnClick\", \"onResetBtnClick\"]),\n    _createVNode(_unref(PageContent), {\n      \"page-name\": \"role\",\n      thead: _unref(thead),\n      \"init-tbody-fn\": _unref(initTbodyData),\n      \"page-data-size\": 100,\n      ref_key: \"pageContentRef\",\n      ref: pageContentRef,\n      onHandleNewData: _unref(handleNewData),\n      onHandleEditData: _unref(handleEditData)\n    }, null, 8, [\"thead\", \"init-tbody-fn\", \"onHandleNewData\", \"onHandleEditData\"]),\n    _createVNode(_component_n_dialog_provider, null, {\n      default: _withCtx(() => [\n        (_unref(showPageModal))\n          ? (_openBlock(), _createBlock(_unref(PageModal), {\n              key: 0,\n              title: _unref(title),\n              modalFormConfig: _unref(modalFormConfig),\n              \"default-info\": _unref(modalDefaultInfo),\n              \"page-name\": \"role\",\n              \"event-name\": _unref(modalEventName),\n              \"other-info\": otherInfo.value\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_n_tree, {\n                  \"block-line\": \"\",\n                  cascade: \"\",\n                  checkable: \"\",\n                  data: treeData.value,\n                  \"on-update:checked-keys\": changeTreeCheckedKeys\n                }, null, 8, [\"data\"])\n              ]),\n              _: 1\n            }, 8, [\"title\", \"modalFormConfig\", \"default-info\", \"event-name\", \"other-info\"]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    })\n  ]))\n}\n}\n\n})","import script from \"./role.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./role.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["searchFormConfig","labelWidth","formItems","field","label","type","itemType","icons","Edit","Delete","thead","align","title","key","render","row","btns","action","map","item","index","verify","h","NButton","onClick","text","event","id","queryInfo","offset","size","NIcon","default","initTbodyData","dataList","btnVerify","btnEvents","console","log","totalList","value","forEach","push","sort","name","intro","createAt","formatUtcString","updateAt","initModalFormConfigFn","modalFormConfig","placeholder","_hoisted_1","class","_defineComponent","setup","__props","store","useStore","pageContentRef","handleQueryBtnClick","handleResetBtnClick","usePageSearch","modalEventName","showPageModal","modalDefaultInfo","handleEditData","handleNewData","usePageModal","treeData","ref","menuList","computed","state","entireMenu","initTreeDataFn","pList","initTreeChildrenFn","childrenItem","childrenList","list","children","otherInfo","changeTreeCheckedKeys","data1","data2","Array","from","Set","watch","newValue","deep","immediate","_ctx","_cache","_component_n_tree","_resolveComponent","_component_n_dialog_provider","_openBlock","_createElementBlock","_createVNode","_unref","PageSearch","onQueryBtnClick","onResetBtnClick","PageContent","ref_key","onHandleNewData","onHandleEditData","_withCtx","_createBlock","PageModal","cascade","checkable","data","_","_createCommentVNode","__exports__"],"sourceRoot":""}