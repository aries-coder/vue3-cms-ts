"use strict";(self["webpackChunkvue3_cms_ts"]=self["webpackChunkvue3_cms_ts"]||[]).push([[544],{4129:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var a=n(3396),l=n(4870),i=n(7890),r=n(6151),o=n(4968);const c={labelWidth:"100px",formItems:[{field:"name",label:"角色名称",type:"input",itemType:"text"},{field:"intro",label:"权限介绍",type:"input",itemType:"text"},{field:"createAt",label:"创建时间",type:"datePicker",itemType:"daterange"}]};var d=n(5393),m=n(4786),u=n(9818),p=n(2646),s=n(1173);const f=[u.Z,p.Z],y=[{type:"selection",align:"center"},{title:"序号",key:"sort",align:"center"},{title:"角色名",align:"center",key:"name"},{title:"权限介绍",align:"center",key:"intro"},{title:"创建时间",align:"center",key:"createAt"},{title:"更新时间",align:"center",key:"updateAt"},{title:"操作",align:"center",key:"action",render:e=>{const t=e.action.map(((t,n)=>{if(t.verify)return(0,a.h)(d.Z,{type:t.type,onClick:()=>{switch(t.text){case"删除":t.event({id:e.id,queryInfo:{offset:0,size:10}});break;case"编辑":t.event(e)}}},[(0,a.h)(m.g,null,{default:()=>(0,a.h)(f[n])}),t.text])}));return t}}];function h(e,t,n){console.log(e,"mmmmmmmmmmmmmmm");const a=[];return e.value.forEach(((e,l)=>{a.push({key:e.id,id:e.id,sort:l+1,name:e.name,intro:e.intro,createAt:(0,s.u)(e.createAt),updateAt:(0,s.u)(e.updateAt),action:[{text:"编辑",type:"primary",verify:t[0],event:n[0]},{text:"删除",type:"error",verify:t[1],event:n[1]}]})})),a}function k(e="new"){if("new"===e){const e={labelWidth:"100px",formItems:[{field:"name",label:"角色名",placeholder:"请输入用户名",type:"input",itemType:"text"},{field:"intro",label:"角色介绍",placeholder:"请输入真实姓名",itemType:"text",type:"input"}]};return e}if("edit"===e){const e={labelWidth:"100px",formItems:[{field:"name",label:"角色名",placeholder:"请输入用户名",type:"input",itemType:"text"},{field:"intro",label:"角色介绍",placeholder:"请输入真实姓名",itemType:"text",type:"input"}]};return e}}var v=n(2925),g=n(8256),b=n(3155);const S={class:"role"};var U=(0,a.aZ)({name:"role",setup(e){const t=(0,b.oR)(),[n,d,m]=(0,v.Y)(),[u,p,s,f,U,x,w]=(0,g.S)(["新建角色","编辑角色"],k),C=(0,l.iH)([]),A=(0,a.Fl)((()=>t.state.entireMenu)),T=e=>{const t=[];e.value.forEach((e=>{const n={label:e.name,key:e.id};function a(e){const t=[];return e.forEach((e=>{const n={label:e.name,key:e.id};e.children&&(n.children=a(e.children)),t.push(n)})),t}e.children&&(n.children=a(e.children)),t.push(n)})),C.value=t},W=(0,l.iH)(),Z=(e,t)=>{const n=Array.from(new Set(t.map((e=>e.key))));console.log(n),W.value={menuList:n}};return(0,a.YP)((()=>A),(e=>{T(e)}),{deep:!0,immediate:!0}),(e,t)=>{const k=(0,a.up)("n-tree"),v=(0,a.up)("n-dialog-provider");return(0,a.wg)(),(0,a.iD)("div",S,[(0,a.Wm)((0,l.SU)(i.Z),{searchFormConfig:(0,l.SU)(c),onQueryBtnClick:(0,l.SU)(d),onResetBtnClick:(0,l.SU)(m)},null,8,["searchFormConfig","onQueryBtnClick","onResetBtnClick"]),(0,a.Wm)((0,l.SU)(r.Z),{"page-name":"role",thead:(0,l.SU)(y),"init-tbody-fn":(0,l.SU)(h),"page-data-size":100,ref_key:"pageContentRef",ref:n,onHandleNewData:(0,l.SU)(w),onHandleEditData:(0,l.SU)(x)},null,8,["thead","init-tbody-fn","onHandleNewData","onHandleEditData"]),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,l.SU)(s)?((0,a.wg)(),(0,a.j4)((0,l.SU)(o.Z),{key:0,title:(0,l.SU)(u),modalFormConfig:(0,l.SU)(f),"default-info":(0,l.SU)(U),"page-name":"role","event-name":(0,l.SU)(p),"other-info":W.value},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{"block-line":"",cascade:"",checkable:"",data:C.value,"on-update:checked-keys":Z},null,8,["data"])])),_:1},8,["title","modalFormConfig","default-info","event-name","other-info"])):(0,a.kq)("",!0)])),_:1})])}}});const x=U;var w=x}}]);
//# sourceMappingURL=544.1644aa98.js.map